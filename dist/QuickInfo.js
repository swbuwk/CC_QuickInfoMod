(()=>{"use strict";var e={921:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BUILDING_NAMES=t.MULT_CLICK_IDS=t.SHORT_BUFF_NAMES=t.COLORS=t.INFO_BLOCK_FONT_SIZE=t.INFO_BLOCK_SIZE=t.ICON_SIZE=t.ICON_URL=void 0,t.ICON_URL="http://cdn.dashnet.org/cookieclicker/beta/img/icons.png?v=2.052",t.ICON_SIZE=18,t.INFO_BLOCK_SIZE=16,t.INFO_BLOCK_FONT_SIZE=12,t.COLORS={red:"rgb(255, 42, 75)",green:"rgb(2, 253, 2)"},t.SHORT_BUFF_NAMES={frenzy:"F",click_frenzy:"CF",dragon_harvest:"DH",dragonflight:"DF",cursed_finger:"CuF",cookie_storm:"CS",blood_frenzy:"EF",sugar_frenzy:"SF",sugar_blessing:"SB",loan_1:"L1",loan_2:"L2",loan_3:"L3",loan_1_interest:"L1 (I)",loan_2_interest:"L2 (I)",loan_3_interest:"L3 (I)",haggler_luck:"Hagglers (+)",pixie_luck:"Pixies (+)",magic_adept:"DI (+)",haggler_misery:"Hagglers (-)",pixie_misery:"Pixies (-)",magic_inept:"DI (-)"},t.MULT_CLICK_IDS=["click_frenzy","dragonflight","cursed_finger","devastation"],t.BUILDING_NAMES=["Cursor","Grandma","Farm","Mine","Factory","Bank","Temple","Wizard Tower","Shipment","Alchemy Lab","Portal","Time Machine","Antim. Condenser","Prism","Chancemaker","Fractal engine","Javascript console","Idleverse","Cortex baker","You"]},204:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.settingsOptions=t.settings=t.globalVars=void 0;const i=n(921);t.globalVars={buffTimers:[],natGCOnScreen:!1},t.settings={guiScale:1,updateFrequency:10,shortBuffNames:!1,showBuildingName:!1,showOldBuffTImers:!0,highlightExistingBuffs:!0,showMultipliers:!0,alternativeBuffStacking:!1,showBuffTimers:!0,showBuffToggler:!0,showGCTimer:!0,warnLastingBuffs:!0},t.settingsOptions=[{id:"showGCTimer",name:"Show Golden Cookie timer",description:"(toggles Golden Cookie timer visibility)",type:"boolean",default:!0,onChange:e=>{const t=l("QI_GCTimer");t&&(t.style.display=e?"flex":"none")}},{id:"showBuffToggler",name:"Show buff toggler",description:'(toggles toggler visibility a.k.a "Hide buffs" button (meta toggler time))',type:"boolean",default:!0,onChange:e=>{const t=l("QI_buffToggler");t&&(t.style.display=e?"flex":"none")}},{id:"guiScale",name:"GUI Scale",description:"(scales the Quick Info GUI)",type:"slider",min:.5,max:2,step:.1,default:1,valueFormat:e=>`x${e}`,onChange:e=>{const t=l("QIContainer");t&&t.querySelectorAll("div").forEach((t=>{t.style.height=e*i.INFO_BLOCK_SIZE+"px",t.style.fontSize=e*i.INFO_BLOCK_FONT_SIZE+"px"}))}},{id:"updateFrequency",name:"Update Frequency",description:"(changes how often the buff timers are updated, low tick values can cause minor lag)",type:"slider",min:0,max:100.1,step:2,default:10,valueFormat:e=>0===e?"every tick":`every ${e} ticks`},{id:"shortBuffNames",name:"Short buff names",description:"(shortens the buff names (e.g. Click Frenzy -> CF, Building specal -> BS))",type:"boolean",default:!1},{id:"showBuildingName",name:"Show building names",description:'(shows the building names on the "building special" buffs)',type:"boolean",default:!1},{id:"showOldBuffTImers",name:"Show old buff timers",description:"(shows the old buff timers, just if you wanna see them idk)",type:"boolean",default:!0,onChange:e=>{const n=l("buffs");if(n&&(n.style.display=e?"block":"none",t.settings.alternativeBuffStacking)){const e=l("QIContainer");if(!e)return;e.style.width=`calc(100% - ${20+(t.settings?.showOldBuffTImers?50:0)}px)`}}},{id:"highlightExistingBuffs",name:"Highlight existing buffs",description:"(highlights the buffs that you already have)",type:"boolean",default:!0},{id:"warnLastingBuffs",name:"Warn lasting buffs",description:"(warns you when you have a buff that will expire in less than 10 seconds)",type:"boolean",default:!0,onChange:e=>{const t=l("QIContainer");t&&t.classList.toggle("qi_warnOff",!e)}},{id:"showMultipliers",name:"Show buff mult.",description:"(shows the buff multipliers)",type:"boolean",default:!0},{id:"alternativeBuffStacking",name:"Alt. buffs stacking",description:"(toggles the buff stacking from vertical to horizontal)",type:"boolean",default:!1,onChange:e=>{const n=l("QIContainer");n&&(e?(n.classList.add("qi_altStacking"),n.style.width=`calc(100% - ${20+(t.settings?.showOldBuffTImers?50:0)}px)`):(n.classList.remove("qi_altStacking"),n.style.width=""))}}]},817:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createBuffsToggler=t.buffsHiddenHTML=t.buffsVisibleHTML=void 0;const i=n(204),s=n(656);t.buffsVisibleHTML="<span>Buffs: <span style='color: rgb(2, 253, 2);'>visible</span> (Hide)</span>",t.buffsHiddenHTML="<span>Buffs: <span style='color: rgb(255, 42, 75);'>hidden</span> (Show)</span>",t.createBuffsToggler=()=>{const e=(0,s.createInfoBlock)("buffToggler");e&&(e.style.cursor="pointer",e.style.transition="background-color 0.5s",e.onmouseenter=()=>{e.style.backgroundColor="rgba(90, 90, 90, 0.5)"},e.onmouseleave=()=>{e.style.backgroundColor="rgba(0, 0, 0, 0.5)"},e.innerHTML=`${i.settings.showBuffTimers?t.buffsVisibleHTML:t.buffsHiddenHTML}`,e.onclick=()=>{i.settings.showBuffTimers=!i.settings.showBuffTimers,e.innerHTML=`${i.settings.showBuffTimers?t.buffsVisibleHTML:t.buffsHiddenHTML}`,i.settings.showBuffTimers?i.globalVars.buffTimers.forEach((e=>{(0,s.createInfoBlock)(e.id)})):i.globalVars.buffTimers.forEach((e=>{const t=l("QI_"+e.id);t&&t.remove()}))},l("QIContainer")?.appendChild(e))}},656:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createInfoBlock=void 0;const i=n(921),s=n(204);t.createInfoBlock=e=>{const t=document.createElement("div");return t.id="QI_"+e,t.classList.add("qi_infoBlock"),t.style.height=s.settings.guiScale*i.INFO_BLOCK_SIZE+"px",t.style.fontSize=s.settings.guiScale*i.INFO_BLOCK_FONT_SIZE+"px",l("QIContainer")?.appendChild(t),t}},528:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initInfoContainer=void 0,t.initInfoContainer=()=>{const e=document.createElement("div");e.id="QIContainer",e.classList.add("qi_infoContainer"),l("sectionLeft")?.appendChild(e)}},882:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.replaceNativeHandlers=void 0;const i=n(204),s=n(360),o=n(245),a=n(800);t.replaceNativeHandlers=()=>{const e=Game.UpdateMenu;Game.UpdateMenu=()=>{e(),(()=>{if(!l("menu")?.childNodes?.length)return;if("prefs"!==Game.onMenu)return;const e=document.createElement("div");e.id="QISettings",e.className="subsection";const t=document.createElement("div");t.className="title",t.innerHTML="Quick Info Settings";const n=document.createElement("div");n.className="listing",i.settingsOptions.forEach((e=>{(0,s.createSettingsOption)(n,e)})),e.appendChild(t),e.appendChild(n),l("menu")?.insertBefore(e,l("menu")?.childNodes[3]||null)})()};const t=Game.LoadSave;Game.LoadSave=e=>(o.BuffUtils.clearTimers(),t(e));const n=Game.gainBuff;Game.gainBuff=(...e)=>{const t=i.globalVars.buffTimers,s=n(...e);return i.settings.highlightExistingBuffs&&o.BuffUtils.highlightExistingBuff(t,s),s};const r=document.createElement("style");r.id="QIStyles",r.innerHTML=a.styles,document.getElementsByTagName("head")[0].appendChild(r)}},713:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applySettings=void 0;const i=n(921),s=n(204),o=n(817),a=["QI_buffToggler","QI_GCTimer"];t.applySettings=()=>{if(1!==s.settings.guiScale&&a.forEach((e=>{const t=l(e);t&&(t.style.height=s.settings.guiScale*i.INFO_BLOCK_SIZE+"px",t.style.fontSize=s.settings.guiScale*i.INFO_BLOCK_FONT_SIZE+"px")})),!s.settings.showGCTimer){const e=l("QI_GCTimer");if(!e)return;e.style.display="none"}if(!s.settings.showBuffToggler){const e=l("QI_buffToggler");if(!e)return;e.style.display="none"}if(!s.settings.showOldBuffTImers){const e=l("buffs");e&&(e.style.display="none")}if(s.settings.alternativeBuffStacking){const e=l("QIContainer");e&&(e.style.flexDirection="row",e.style.flexWrap="wrap",e.style.width=`calc(100% - ${20+(s.settings?.showOldBuffTImers?50:0)}px)`,e.style.justifyContent="flex-start")}if(!s.settings.showBuffTimers){const e=l("QI_buffToggler");if(!e)return;e.innerHTML=o.buffsHiddenHTML}}},396:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createBooleanSettingsOption=void 0;const i=n(204);t.createBooleanSettingsOption=(e,t)=>{const n=i.settings[t.id],s=document.createElement("a");if(s.classList.add("smallFancyButton","prefButton","option"),n||s.classList.add("off"),s.innerHTML=`${t.name} ${n?"ON":"OFF"}`,s.onclick=()=>{const e=!i.settings[t.id];(e=>{i.settings[t.id]=e,s.innerHTML=`${t.name} ${e?"ON":"OFF"}`;const n=e?"remove":"add";s.classList[n]("off")})(e),PlaySound("snd/tick.mp3"),t.onChange&&t.onChange(e)},e.appendChild(s),t.description){const n=document.createElement("label");n.innerHTML=t.description,e.appendChild(n)}e.appendChild(document.createElement("br"))}},978:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSliderSettingOption=void 0;const i=n(204);t.createSliderSettingOption=(e,t)=>{const n=i.settings[t.id],s=document.createElement("div");s.className="sliderBox";const o=document.createElement("div");o.style.float="left",o.className="smallFancyButton",o.innerHTML=t.name;const a=document.createElement("div");a.style.float="right",a.className="smallFancyButton",a.innerHTML=t.valueFormat(n);const l=document.createElement("input");l.className="slider",l.type="range",l.min=String(t.min),l.max=String(t.max),l.step=String(t.step),l.value=String(void 0!==n?n:t.default),s.appendChild(o),s.appendChild(a),s.appendChild(l);const r=e=>{i.settings[t.id]=+e,a.innerHTML=t.valueFormat(+e),t.onChange&&t.onChange(+e)};if(s.onchange=()=>{r(l.value),PlaySound("snd/tick.mp3")},s.oninput=()=>{r(l.value)},e.appendChild(s),t.description){const n=document.createElement("label");n.style.position="relative",n.style.display="inline-block",n.style.top="-9px",n.innerHTML=t.description,e.appendChild(n)}e.appendChild(document.createElement("br"))}},360:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createSettingsOption=void 0;const i=n(396),s=n(978);t.createSettingsOption=(e,t)=>{"slider"===t.type?(0,s.createSliderSettingOption)(e,t):"boolean"===t.type&&(0,i.createBooleanSettingsOption)(e,t)}},274:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CheckGCSpawn=void 0;const i=n(204);t.CheckGCSpawn=()=>{let e=!1;Game.shimmers.forEach((t=>{"golden"===t.type&&t.spawnLead&&(e=!0)})),i.globalVars.natGCOnScreen=e}},962:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateBuffsTimer=void 0;const i=n(921),s=n(204),o=n(245),a=n(656);t.UpdateBuffsTimer=()=>{if(Object.keys(Game.buffs).forEach((e=>{const t=Game.buffs[e];if(!t)return;if(!s.settings.showBuffTimers)return;const{time:n,multCpS:r,multClick:d}=t,f=o.BuffUtils.getId(t),c=Math.ceil(n/Game.fps),u=o.BuffUtils.getName(t),g=o.BuffUtils.getIcon(t),p=(i.MULT_CLICK_IDS.includes(f)?d:r)||0,m=p>1?i.COLORS.green:i.COLORS.red;s.globalVars.buffTimers.find((e=>e.id===f))||((0,a.createInfoBlock)(f),s.globalVars.buffTimers.push({id:f,key:e}));const h=l("QI_"+f);h&&(h.classList.toggle("qi_warning",c<=10),h.innerHTML=`\n      ${g}<span>${u}: ${c}s</span> <span style="color: ${m}; display: ${0!==p&&s.settings.showMultipliers?"inline":"none"};">x${parseFloat(p.toFixed(1))}</span>\n    `)})),s.globalVars.buffTimers.length!==Object.keys(Game.buffs).length){let e=[];s.globalVars.buffTimers.slice().forEach(((t,n)=>{if(!Object.keys(Game.buffs).includes(t.key)){const n=l("QI_"+t.id);if(!n)return;n.remove(),e.push(t.id)}})),s.globalVars.buffTimers=s.globalVars.buffTimers.filter((t=>!e.includes(t.id)))}}},676:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateGCTimer=void 0;const i=n(204),s=n(758);t.UpdateGCTimer=()=>{const e=Game.shimmerTypes.golden.minTime,t=Game.shimmerTypes.golden.maxTime,n=t-e,o=Game.shimmerTypes.golden.time,a=Math.max(0,o-e),r=Math.ceil((e-o)/Game.fps),d=`${r>0?`${r}+`:""}${Math.ceil(Math.min(n,t-o)/Game.fps)}s`,f=100*(1-Math.exp(-5*(a/Game.fps)**5.93/(n/Game.fps)**5)),c=(0,s.colorInterpolate)([255,42,75],[2,253,2],Math.min(1,f/50)),u=l("QI_GCTimer");u&&(i.globalVars.natGCOnScreen?u.innerHTML="<span>GC: On screen</span>":u.innerHTML=`<span>GC: ${d}</span> <span style="color: rgb(${c.toString()});">${f.toFixed(1)}%</span>`)}},800:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;const i=n(921);t.styles=`\n  .qi_infoBlock {\n    position: relative;\n    z-index: 10;\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 3px 6px;\n    background-color: rgba(0, 0, 0, 0.5);\n    border-radius: 5px;\n    transition: box-shadow 0.5s;\n  }\n\n  .qi_infoContainer {\n    position: absolute;\n    top: 10px;\n    left: 10px;\n    z-index: 1000;\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    justify-content: center;\n    gap: 3px;\n    font-weight: bold;\n  }\n\n  .qi_altStacking {\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: flex-start;\n  }\n\n  .qi_behind {\n    z-index: 5;\n  }\n\n  .qi_highlighted {\n    box-shadow: 0 0 10px 10px white !important;\n  }\n\n  .qi_infoContainer:not(.qi_warnOff) .qi_warning { \n    animation: qi-warning-blink 1s infinite;\n  }\n\n  @keyframes qi-warning-blink {\n    0% { color: ${i.COLORS.red}; }\n    50% { color: white; }\n    100% { color: ${i.COLORS.red}; }\n  }\n`},245:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BuffUtils=void 0;const i=n(921),s=n(204),o=n(5),a=e=>{const{type:t,arg2:n}=e,{name:i}=t;return(i.includes("building")?`${i}_${n}`:i).replaceAll(" ","_")},r=e=>{const{arg2:t}=e;return void 0===t?"":i.BUILDING_NAMES[t]};t.BuffUtils={getId:a,getName:e=>{let t,n=a(e);return t=s.settings.shortBuffNames?n.includes("building_buff")?"BS":n.includes("building_debuff")?"Rust":i.SHORT_BUFF_NAMES[n]||e?.name:e?.name,s.settings.showBuildingName&&n.includes("building")&&(t+=` (${r(e)})`),t},getIcon:e=>{const{icon:t}=e,n=s.settings.guiScale*i.ICON_SIZE,o=`${-t[0]*n}px ${-t[1]*n}px`,a=36*n+"px";return`\n    <div style="width: ${n}px; height: ${n}px; background-image: url(${i.ICON_URL}); background-size: ${a}; background-position: ${o}"></div>\n  `},getBuildingName:r,clearTimers:()=>{s.globalVars.buffTimers.forEach((({id:e})=>{const t=l("QI_"+e);t&&t.remove()})),s.globalVars.buffTimers=[]},highlightExistingBuff:(e,n)=>{const i=t.BuffUtils.getId(n),s=e.find((e=>e.id===i));if(s){const e=l("QI_"+s.id);(0,o.highlightInfoBlock)(e)}}}},758:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.colorInterpolate=void 0,t.colorInterpolate=(e,t,n)=>[0,0,0].map(((i,s)=>Math.round(e[s]*(1-n)+t[s]*n)))},5:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.highlightInfoBlock=void 0,t.highlightInfoBlock=e=>{e&&(e.classList.add("qi_behind","qi_highlighted"),setTimeout((()=>{e.classList.remove("qi_highlighted")}),1e3),setTimeout((()=>{e.classList.remove("qi_behind")}),1500))}}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}(()=>{const e=n(204),t=n(274),i=n(962),s=n(676),o=n(656),a=n(528),l=n(713),r=n(817),d=n(882),f=()=>{const n=Math.max(1,e.settings.updateFrequency);Game.drawT%Math.ceil(n/2)==0&&((0,s.UpdateGCTimer)(),Game.drawT%n==0&&((0,t.CheckGCSpawn)(),(0,i.UpdateBuffsTimer)()))},c={init:()=>{(0,a.initInfoContainer)(),(0,d.replaceNativeHandlers)(),(0,r.createBuffsToggler)(),(0,o.createInfoBlock)("GCTimer"),Game.registerHook("draw",f)},save:()=>JSON.stringify(e.settings),load:t=>{const n=JSON.parse(t);Object.keys(n).forEach((t=>{e.settings[t]=n[t]})),(0,l.applySettings)()}};"undefined"!=typeof Steam?setTimeout((function(){Game.registerMod("QuickInfo",c)}),2e3):Game.registerMod("QuickInfo",c)})()})();
//# sourceMappingURL=https://swbuwk.github.io/CC_QuickInfoMod/dist/QuickInfo.js.map